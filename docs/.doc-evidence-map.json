{
  "generated_at": "2026-02-26T10:44:12.237590+00:00",
  "root": "/Users/tompoet/AgentSkills",
  "plan": "/Users/tompoet/AgentSkills/docs/.doc-plan.json",
  "spec": "/Users/tompoet/AgentSkills/docs/.doc-spec.json",
  "facts": "/Users/tompoet/AgentSkills/docs/.repo-facts.json",
  "plan_meta": {
    "generated_at": "2026-02-26T10:44:12.174001+00:00",
    "root": "/Users/tompoet/AgentSkills",
    "mode": "audit",
    "policy_path": "docs/.doc-policy.json",
    "manifest_path": "docs/.doc-manifest.json",
    "manifest_source": "existing",
    "manifest_profile": "medium",
    "manifest_changed": false,
    "manifest_effective": {
      "version": 1,
      "required": {
        "files": [
          "docs/.doc-spec.json",
          "docs/.doc-topology.json",
          "docs/architecture.md",
          "docs/exec-plans/active/docs-sor-legacy-migration-automation-plan.md",
          "docs/exec-plans/active/docs-sor-roadmap-v2.1-phase-e-delivery-preacceptance-anti-drift.md",
          "docs/exec-plans/active/docs-sor-roadmap-v2.1-semantic-structured-generation.md",
          "docs/exec-plans/active/docs-sor-roadmap-v2.2-phase-f-agent-runtime-semantic-hardening.md",
          "docs/exec-plans/active/docs-sor-roadmap-v2.4-dual-replica-sync-ci-convergence.md",
          "docs/exec-plans/active/docs-sor-roadmap-v2.5-hybrid-template-llm-governance.md",
          "docs/exec-plans/active/docs-sor-roadmap-v2.5-remediation-agent-strict-policy-enforcement.md",
          "docs/exec-plans/active/docs-sor-roadmap-v2.6-acceptance-report.md",
          "docs/exec-plans/active/docs-sor-roadmap-v2.6-topology-progressive-disclosure-governance.md",
          "docs/exec-plans/active/docs-sor-roadmap-v2.7-agent-first-semantic-priority-governance.md",
          "docs/exec-plans/active/docs-sor-roadmap-v2.7-m1-acceptance-report.md",
          "docs/exec-plans/active/docs-sor-roadmap-v2.7-m2-acceptance-report.md",
          "docs/exec-plans/active/docs-sor-roadmap-v2.7-m3-acceptance-report.md",
          "docs/exec-plans/active/docs-sor-roadmap-v2.7-m4-acceptance-report.md",
          "docs/exec-plans/active/docs-sor-roadmap-v2.7-m4-test-matrix.md",
          "docs/exec-plans/active/docs-sor-roadmap-v2.md",
          "docs/exec-plans/completed/README.md",
          "docs/exec-plans/completed/docs-sor-legacy-migration-automation-closeout-2026-02-22.md",
          "docs/exec-plans/completed/docs-sor-roadmap-v2.1-closeout-2026-02-22.md",
          "docs/exec-plans/completed/docs-sor-roadmap-v2.1-phase-e-closeout-2026-02-22.md",
          "docs/exec-plans/completed/docs-sor-roadmap-v2.2-phase-f-closeout-2026-02-22.md",
          "docs/exec-plans/completed/docs-sor-roadmap-v2.5-remediation-closeout-2026-02-24.md",
          "docs/exec-plans/completed/docs-sor-roadmap-v2.6-closeout-2026-02-24.md",
          "docs/exec-plans/completed/docs-sor-roadmap-v2.7-closeout-2026-02-26.md",
          "docs/index.md",
          "docs/references/doc_spec_schema.md",
          "docs/references/doc_topology_schema.md",
          "docs/references/exec-plan-closeout-template.md",
          "docs/runbook.md"
        ],
        "dirs": [
          "docs/exec-plans/active",
          "docs/exec-plans/completed",
          "docs/references",
          "docs/tech-debt"
        ]
      },
      "optional": {
        "files": [
          "docs/exec-plans/active/docs-sor-roadmap-v2.1-phase-d-acceptance-report.md",
          "docs/exec-plans/active/docs-sor-roadmap-v2.1-phase-d-test-matrix.md",
          "docs/exec-plans/completed/docs-sor-roadmap-v2-closeout-2026-02-22.md",
          "docs/exec-plans/completed/docs-sor-roadmap-v2.3-phase-f5-closeout-2026-02-22.md",
          "docs/exec-plans/completed/docs-sor-roadmap-v2.4-closeout-2026-02-23.md",
          "docs/exec-plans/completed/docs-sor-roadmap-v2.5-closeout-2026-02-23.md",
          "docs/glossary.md",
          "docs/references/legacy-semantic-migration-acceptance-template.md"
        ]
      },
      "archive_dir": "docs/archive"
    },
    "manifest_reasoning": [
      "include_files=16"
    ],
    "capability_decisions": [
      {
        "id": "core.index",
        "enabled": true,
        "source": "baseline",
        "evidence": [
          "baseline capability is always required"
        ],
        "required_files": [
          "docs/index.md"
        ],
        "required_dirs": [],
        "optional_files": []
      },
      {
        "id": "operations.runbook",
        "enabled": true,
        "source": "goal_include",
        "evidence": [
          "ci_configs=1",
          "enabled by doc_goals.include"
        ],
        "required_files": [
          "docs/runbook.md"
        ],
        "required_dirs": [],
        "optional_files": []
      },
      {
        "id": "architecture.overview",
        "enabled": true,
        "source": "goal_include",
        "evidence": [
          "file_count=159",
          "enabled by doc_goals.include"
        ],
        "required_files": [
          "docs/architecture.md"
        ],
        "required_dirs": [],
        "optional_files": []
      },
      {
        "id": "planning.workspace",
        "enabled": true,
        "source": "goal_include",
        "evidence": [
          "ci_configs=1",
          "file_count=159",
          "enabled by doc_goals.include"
        ],
        "required_files": [],
        "required_dirs": [
          "docs/exec-plans/active",
          "docs/exec-plans/completed",
          "docs/tech-debt"
        ],
        "optional_files": []
      },
      {
        "id": "glossary.terms",
        "enabled": true,
        "source": "signal",
        "evidence": [
          "docs_markdown_count=40"
        ],
        "required_files": [],
        "required_dirs": [],
        "optional_files": [
          "docs/glossary.md"
        ]
      },
      {
        "id": "incident.response",
        "enabled": false,
        "source": "disabled",
        "evidence": [
          "no enabling signals"
        ],
        "required_files": [
          "docs/incident-response.md"
        ],
        "required_dirs": [],
        "optional_files": []
      },
      {
        "id": "security.posture",
        "enabled": false,
        "source": "disabled",
        "evidence": [
          "no enabling signals"
        ],
        "required_files": [
          "docs/security.md"
        ],
        "required_dirs": [],
        "optional_files": []
      },
      {
        "id": "compliance.controls",
        "enabled": false,
        "source": "disabled",
        "evidence": [
          "no enabling signals"
        ],
        "required_files": [
          "docs/compliance.md"
        ],
        "required_dirs": [],
        "optional_files": []
      }
    ],
    "doc_metadata": {
      "enabled": true,
      "require_owner": true,
      "require_last_reviewed": true,
      "require_review_cycle_days": true
    },
    "doc_topology": {
      "enabled": true,
      "path": "docs/.doc-topology.json",
      "exists": true,
      "loaded": true,
      "errors": [],
      "warnings": [],
      "metrics": {
        "node_count": 37,
        "managed_markdown_count": 37,
        "topology_reachable_ratio": 1.0,
        "topology_orphan_count": 0,
        "topology_unreachable_count": 0,
        "topology_max_depth": 2,
        "topology_depth_limit": 3,
        "topology_over_depth_count": 0,
        "navigation_missing_count": 0
      }
    },
    "progressive_disclosure": {
      "enabled": true,
      "required_slots": [
        "summary",
        "key_facts",
        "next_steps"
      ],
      "summary_max_chars": 160,
      "max_key_facts": 5,
      "max_next_steps": 3,
      "fail_on_missing_slots": true
    },
    "legacy_sources": {
      "enabled": true,
      "mapping_strategy": "path_based",
      "candidate_count": 0,
      "target_doc_count": 0,
      "semantic": {
        "enabled": true,
        "engine": "llm",
        "provider": "agent_runtime",
        "model": "agent-runtime-report-v1",
        "auto_migrate_threshold": 0.85,
        "review_threshold": 0.6,
        "allow_fallback_auto_migrate": false,
        "report_path": "docs/.legacy-semantic-report.json",
        "report_available": true,
        "report_entry_count": 0,
        "report_error": null,
        "decision_counts": {},
        "fallback_auto_migrate_count": 0
      }
    },
    "language": {
      "primary": "zh-CN",
      "profile": "zh-CN",
      "source": "policy_locked"
    }
  },
  "doc_spec": {
    "errors": [],
    "warnings": []
  },
  "metrics": {
    "claims": 4,
    "supported": 4,
    "unknown": 0,
    "missing": 0
  },
  "documents": [
    {
      "path": "docs/architecture.md",
      "sections": [
        {
          "section_id": "module_inventory",
          "claims": [
            {
              "claim_id": "architecture.modules.top_level",
              "status": "supported",
              "statement": "仓库的顶层模块包括：skills",
              "statement_template": "仓库的顶层模块包括：{modules}",
              "required_evidence_types": [
                "repo_scan.modules"
              ],
              "missing_evidence_types": [],
              "allow_unknown": false,
              "evidence": [
                {
                  "type": "repo_scan.modules",
                  "value": [
                    "skills"
                  ]
                }
              ],
              "citations": [
                "evidence://repo_scan.modules"
              ],
              "citation": "evidence://repo_scan.modules"
            }
          ]
        },
        {
          "section_id": "dependency_manifests",
          "claims": [
            {
              "claim_id": "architecture.dependencies.manifests",
              "status": "supported",
              "statement": "仓库依赖清单包括：none",
              "statement_template": "仓库依赖清单包括：{manifests}",
              "required_evidence_types": [
                "repo_scan.manifests"
              ],
              "missing_evidence_types": [],
              "allow_unknown": false,
              "evidence": [
                {
                  "type": "repo_scan.manifests",
                  "value": {
                    "go.mod": false,
                    "package.json": false,
                    "pyproject.toml": false,
                    "requirements.txt": false,
                    "Cargo.toml": false,
                    "pom.xml": false,
                    "build.gradle": false,
                    "Makefile": false
                  }
                }
              ],
              "citations": [
                "evidence://repo_scan.manifests"
              ],
              "citation": "evidence://repo_scan.manifests"
            }
          ]
        }
      ]
    },
    {
      "path": "docs/runbook.md",
      "sections": [
        {
          "section_id": "dev_commands",
          "claims": [
            {
              "claim_id": "runbook.dev_commands",
              "status": "supported",
              "statement": "当前开发命令集合为：REPO_ROOT=\"/Users/tompoet/AgentSkills\", PYTHON_BIN=\"${PYTHON_BIN:-python3}\", CODEX_HOME_RESOLVED=\"${CODEX_HOME:-$HOME/.codex}\", if [ -n \"${SKILL_DIR:-}\" ]; then, [ -d \"$SKILL_DIR/scripts\" ] || { echo \"invalid SKILL_DIR: $SKILL_DIR\" >&2; exit 2; }, elif [ -d \"$REPO_ROOT/skills/docs-sor-maintainer/scripts\" ]; then, SKILL_DIR=\"$REPO_ROOT/skills/docs-sor-maintainer\", elif [ -d \"$REPO_ROOT/.agents/skills/docs-sor-maintainer/scripts\" ]; then, SKILL_DIR=\"$REPO_ROOT/.agents/skills/docs-sor-maintainer\", elif [ -d \"$CODEX_HOME_RESOLVED/skills/docs-sor-maintainer/scripts\" ]; then, SKILL_DIR=\"$CODEX_HOME_RESOLVED/skills/docs-sor-maintainer\", else, echo \"docs-sor-maintainer not found\" >&2, exit 2, fi, \"$PYTHON_BIN\" \"$SKILL_DIR/scripts/repo_scan.py\" --root \"$REPO_ROOT\" --output \"$REPO_ROOT/docs/.repo-facts.json\", \"$PYTHON_BIN\" \"$SKILL_DIR/scripts/doc_plan.py\" --root \"$REPO_ROOT\" --mode bootstrap --facts \"$REPO_ROOT/docs/.repo-facts.json\" --output \"$REPO_ROOT/docs/.doc-plan-bootstrap.json\", \"$PYTHON_BIN\" \"$SKILL_DIR/scripts/doc_apply.py\" --root \"$REPO_ROOT\" --plan \"$REPO_ROOT/docs/.doc-plan-bootstrap.json\" --mode bootstrap, \"$PYTHON_BIN\" \"$SKILL_DIR/scripts/doc_plan.py\" --root \"$REPO_ROOT\" --mode apply-safe --facts \"$REPO_ROOT/docs/.repo-facts.json\" --output \"$REPO_ROOT/docs/.doc-plan-apply-safe.json\", \"$PYTHON_BIN\" \"$SKILL_DIR/scripts/doc_apply.py\" --root \"$REPO_ROOT\" --plan \"$REPO_ROOT/docs/.doc-plan-apply-safe.json\" --mode apply-safe, \"$PYTHON_BIN\" \"$SKILL_DIR/scripts/doc_synthesize.py\" --root \"$REPO_ROOT\" --plan \"$REPO_ROOT/docs/.doc-plan-apply-safe.json\" --facts \"$REPO_ROOT/docs/.repo-facts.json\" --output \"$REPO_ROOT/docs/.doc-evidence-map.json\"",
              "statement_template": "当前开发命令集合为：{commands}",
              "required_evidence_types": [
                "runbook.dev_commands"
              ],
              "missing_evidence_types": [],
              "allow_unknown": false,
              "evidence": [
                {
                  "type": "runbook.dev_commands",
                  "value": [
                    "REPO_ROOT=\"/Users/tompoet/AgentSkills\"",
                    "PYTHON_BIN=\"${PYTHON_BIN:-python3}\"",
                    "CODEX_HOME_RESOLVED=\"${CODEX_HOME:-$HOME/.codex}\"",
                    "if [ -n \"${SKILL_DIR:-}\" ]; then",
                    "[ -d \"$SKILL_DIR/scripts\" ] || { echo \"invalid SKILL_DIR: $SKILL_DIR\" >&2; exit 2; }",
                    "elif [ -d \"$REPO_ROOT/skills/docs-sor-maintainer/scripts\" ]; then",
                    "SKILL_DIR=\"$REPO_ROOT/skills/docs-sor-maintainer\"",
                    "elif [ -d \"$REPO_ROOT/.agents/skills/docs-sor-maintainer/scripts\" ]; then",
                    "SKILL_DIR=\"$REPO_ROOT/.agents/skills/docs-sor-maintainer\"",
                    "elif [ -d \"$CODEX_HOME_RESOLVED/skills/docs-sor-maintainer/scripts\" ]; then",
                    "SKILL_DIR=\"$CODEX_HOME_RESOLVED/skills/docs-sor-maintainer\"",
                    "else",
                    "echo \"docs-sor-maintainer not found\" >&2",
                    "exit 2",
                    "fi",
                    "\"$PYTHON_BIN\" \"$SKILL_DIR/scripts/repo_scan.py\" --root \"$REPO_ROOT\" --output \"$REPO_ROOT/docs/.repo-facts.json\"",
                    "\"$PYTHON_BIN\" \"$SKILL_DIR/scripts/doc_plan.py\" --root \"$REPO_ROOT\" --mode bootstrap --facts \"$REPO_ROOT/docs/.repo-facts.json\" --output \"$REPO_ROOT/docs/.doc-plan-bootstrap.json\"",
                    "\"$PYTHON_BIN\" \"$SKILL_DIR/scripts/doc_apply.py\" --root \"$REPO_ROOT\" --plan \"$REPO_ROOT/docs/.doc-plan-bootstrap.json\" --mode bootstrap",
                    "\"$PYTHON_BIN\" \"$SKILL_DIR/scripts/doc_plan.py\" --root \"$REPO_ROOT\" --mode apply-safe --facts \"$REPO_ROOT/docs/.repo-facts.json\" --output \"$REPO_ROOT/docs/.doc-plan-apply-safe.json\"",
                    "\"$PYTHON_BIN\" \"$SKILL_DIR/scripts/doc_apply.py\" --root \"$REPO_ROOT\" --plan \"$REPO_ROOT/docs/.doc-plan-apply-safe.json\" --mode apply-safe",
                    "\"$PYTHON_BIN\" \"$SKILL_DIR/scripts/doc_synthesize.py\" --root \"$REPO_ROOT\" --plan \"$REPO_ROOT/docs/.doc-plan-apply-safe.json\" --facts \"$REPO_ROOT/docs/.repo-facts.json\" --output \"$REPO_ROOT/docs/.doc-evidence-map.json\""
                  ]
                }
              ],
              "citations": [
                "evidence://runbook.dev_commands"
              ],
              "citation": "evidence://runbook.dev_commands"
            }
          ]
        },
        {
          "section_id": "validation_commands",
          "claims": [
            {
              "claim_id": "runbook.validation_commands",
              "status": "supported",
              "statement": "当前校验命令集合为：\"$PYTHON_BIN\" \"$SKILL_DIR/scripts/doc_validate.py\" --root \"$REPO_ROOT\" --facts \"$REPO_ROOT/docs/.repo-facts.json\" --fail-on-drift --fail-on-freshness --output \"$REPO_ROOT/docs/.doc-validate-report.json\", \"$PYTHON_BIN\" \"$SKILL_DIR/scripts/doc_quality.py\" --root \"$REPO_ROOT\" --output \"$REPO_ROOT/docs/.doc-quality-report.json\", \"$PYTHON_BIN\" \"$SKILL_DIR/scripts/doc_garden.py\" --root \"$REPO_ROOT\" --apply-mode apply-safe --repair-plan-mode repair --fail-on-drift --fail-on-freshness, python3 -m unittest -v skills.docs-sor-maintainer.tests.test_doc_legacy_migration, python3 -m unittest discover -s skills/docs-sor-maintainer/tests -p 'test_*.py', \"$PYTHON_BIN\" \"$SKILL_DIR/scripts/repo_scan.py\" --root \"$REPO_ROOT\" --output \"$REPO_ROOT/docs/.repo-facts.json\", \"$PYTHON_BIN\" \"$SKILL_DIR/scripts/doc_plan.py\" --root \"$REPO_ROOT\" --mode audit --facts \"$REPO_ROOT/docs/.repo-facts.json\" --output \"$REPO_ROOT/docs/.doc-plan.json\", \"$PYTHON_BIN\" \"$SKILL_DIR/scripts/doc_plan.py\" --root \"$REPO_ROOT\" --mode audit --facts \"$REPO_ROOT/docs/.repo-facts.json\" --output \"$REPO_ROOT/docs/.doc-plan-phase-f-audit.json\", python3 -m unittest -v skills.docs-sor-maintainer.tests.test_doc_agents_validate, python3 -m unittest -v skills.docs-sor-maintainer.tests.test_doc_garden_repair_loop, python3 -m unittest -v skills.docs-sor-maintainer.tests.test_doc_validate_exec_plan_closeout, python3 -m unittest -v skills.docs-sor-maintainer.tests.test_doc_semantic_runtime, python3 -m unittest -v skills.docs-sor-maintainer.tests.test_doc_apply_section_actions, \"$PYTHON_BIN\" \"$SKILL_DIR/scripts/doc_apply.py\" --root \"$REPO_ROOT\" --plan \"$REPO_ROOT/docs/.doc-plan.json\" --mode apply-safe, \"$PYTHON_BIN\" \"$SKILL_DIR/scripts/doc_synthesize.py\" --root \"$REPO_ROOT\" --plan \"$REPO_ROOT/docs/.doc-plan.json\" --facts \"$REPO_ROOT/docs/.repo-facts.json\" --output \"$REPO_ROOT/docs/.doc-evidence-map.json\", python3 -m unittest -v skills.docs-sor-maintainer.tests.test_doc_topology_schema, python3 -m unittest -v skills.docs-sor-maintainer.tests.test_doc_validate_topology_depth, python3 -m unittest -v skills.docs-sor-maintainer.tests.test_doc_quality_progressive_slots, python3 -m unittest -v skills.docs-sor-maintainer.tests.test_doc_apply_semantic_slots_v2, python3 -m unittest -v skills.docs-sor-maintainer.tests.test_doc_garden_skip_post_scan_when_no_apply, python3 - <<'PY', import json, from pathlib import Path, root = Path(\"/Users/tompoet/AgentSkills\"), report = json.loads((root / \"docs/.doc-garden-report.json\").read_text(encoding=\"utf-8\")), steps = [str(step.get(\"name\", \"\")) for step in report.get(\"steps\", [])], assert report.get(\"apply\", {}).get(\"applied\") == 0, assert \"run:scan-post-apply\" not in steps, assert isinstance(report.get(\"summary\", {}).get(\"garden_total_duration_ms\"), int), assert isinstance(report.get(\"performance\", {}).get(\"scan_duration_ms\"), int), assert isinstance(report.get(\"performance\", {}).get(\"plan_duration_ms\"), int), assert isinstance(report.get(\"performance\", {}).get(\"validate_duration_ms\"), int), print(\"WP4 acceptance checks passed\"), PY, artifacts = [, \"docs/exec-plans/active/docs-sor-roadmap-v2.6-acceptance-report.md\",, \"docs/references/exec-plan-closeout-template.md\",, \"docs/exec-plans/completed/docs-sor-roadmap-v2.6-closeout-2026-02-24.md\",, ], for rel in artifacts:, assert (root / rel).exists(), f\"missing required V2.6 WP5 artifact: {rel}\", plan_text = (, root / \"docs/exec-plans/active/docs-sor-roadmap-v2.6-topology-progressive-disclosure-governance.md\", ).read_text(encoding=\"utf-8\"), assert \"<!-- exec-plan-status: completed -->\" in plan_text, assert (, \"<!-- exec-plan-closeout: docs/exec-plans/completed/docs-sor-roadmap-v2.6-closeout-2026-02-24.md -->\", in plan_text, ), print(\"WP5 acceptance checks passed\"), \"$PYTHON_BIN\" \"$SKILL_DIR/scripts/doc_plan.py\" --root \"$REPO_ROOT\" --mode audit --facts \"$REPO_ROOT/docs/.repo-facts.json\" --output \"$REPO_ROOT/docs/.doc-plan-v2.7-m1.json\", \"$PYTHON_BIN\" \"$SKILL_DIR/scripts/doc_apply.py\" --root \"$REPO_ROOT\" --plan \"$REPO_ROOT/docs/.doc-plan-v2.7-m1.json\" --mode apply-safe, python3 -m unittest -v skills.docs-sor-maintainer.tests.test_doc_agents, \"$PYTHON_BIN\" \"$SKILL_DIR/scripts/doc_plan.py\" --root \"$REPO_ROOT\" --mode audit --facts \"$REPO_ROOT/docs/.repo-facts.json\" --output \"$REPO_ROOT/docs/.doc-plan-v2.7-m2.json\", \"$PYTHON_BIN\" \"$SKILL_DIR/scripts/doc_apply.py\" --root \"$REPO_ROOT\" --plan \"$REPO_ROOT/docs/.doc-plan-v2.7-m2.json\" --mode apply-safe, python3 -m unittest -v skills.docs-sor-maintainer.tests.test_doc_plan_section_actions, \"$PYTHON_BIN\" \"$SKILL_DIR/scripts/doc_plan.py\" --root \"$REPO_ROOT\" --mode audit --facts \"$REPO_ROOT/docs/.repo-facts.json\" --output \"$REPO_ROOT/docs/.doc-plan-v2.7-m3.json\", \"$PYTHON_BIN\" \"$SKILL_DIR/scripts/doc_apply.py\" --root \"$REPO_ROOT\" --plan \"$REPO_ROOT/docs/.doc-plan-v2.7-m3.json\" --mode apply-safe, \"$PYTHON_BIN\" \"$SKILL_DIR/scripts/doc_synthesize.py\" --root \"$REPO_ROOT\" --plan \"$REPO_ROOT/docs/.doc-plan-v2.7-m3.json\" --facts \"$REPO_ROOT/docs/.repo-facts.json\" --output \"$REPO_ROOT/docs/.doc-evidence-map.json\", python3 -m unittest -v skills.docs-sor-maintainer.tests.test_doc_validate_semantic_observability, \"$PYTHON_BIN\" \"$SKILL_DIR/scripts/doc_garden.py\" --root \"$REPO_ROOT\" --plan-mode audit --apply-mode apply-safe --fail-on-drift --fail-on-freshness, \"$PYTHON_BIN\" \"$SKILL_DIR/scripts/doc_plan.py\" --root \"$REPO_ROOT\" --mode audit --facts \"$REPO_ROOT/docs/.repo-facts.json\" --output \"$REPO_ROOT/docs/.doc-plan-v2.7-m4.json\", \"$PYTHON_BIN\" \"$SKILL_DIR/scripts/doc_apply.py\" --root \"$REPO_ROOT\" --plan \"$REPO_ROOT/docs/.doc-plan-v2.7-m4.json\" --mode apply-safe, \"$PYTHON_BIN\" \"$SKILL_DIR/scripts/doc_synthesize.py\" --root \"$REPO_ROOT\" --plan \"$REPO_ROOT/docs/.doc-plan-v2.7-m4.json\" --facts \"$REPO_ROOT/docs/.repo-facts.json\" --output \"$REPO_ROOT/docs/.doc-evidence-map.json\", python3 -m unittest -v \\, skills.docs-sor-maintainer.tests.test_doc_semantic_runtime \\, skills.docs-sor-maintainer.tests.test_doc_plan_section_actions \\, skills.docs-sor-maintainer.tests.test_doc_apply_section_actions \\, skills.docs-sor-maintainer.tests.test_doc_validate_semantic_observability \\, skills.docs-sor-maintainer.tests.test_doc_garden_repair_loop \\, skills.docs-sor-maintainer.tests.test_doc_validate_exec_plan_closeout, python3 -m py_compile \"$SKILL_DIR\"/scripts/*.py",
              "statement_template": "当前校验命令集合为：{commands}",
              "required_evidence_types": [
                "runbook.validation_commands"
              ],
              "missing_evidence_types": [],
              "allow_unknown": false,
              "evidence": [
                {
                  "type": "runbook.validation_commands",
                  "value": [
                    "\"$PYTHON_BIN\" \"$SKILL_DIR/scripts/doc_validate.py\" --root \"$REPO_ROOT\" --facts \"$REPO_ROOT/docs/.repo-facts.json\" --fail-on-drift --fail-on-freshness --output \"$REPO_ROOT/docs/.doc-validate-report.json\"",
                    "\"$PYTHON_BIN\" \"$SKILL_DIR/scripts/doc_quality.py\" --root \"$REPO_ROOT\" --output \"$REPO_ROOT/docs/.doc-quality-report.json\"",
                    "\"$PYTHON_BIN\" \"$SKILL_DIR/scripts/doc_garden.py\" --root \"$REPO_ROOT\" --apply-mode apply-safe --repair-plan-mode repair --fail-on-drift --fail-on-freshness",
                    "python3 -m unittest -v skills.docs-sor-maintainer.tests.test_doc_legacy_migration",
                    "python3 -m unittest discover -s skills/docs-sor-maintainer/tests -p 'test_*.py'",
                    "\"$PYTHON_BIN\" \"$SKILL_DIR/scripts/repo_scan.py\" --root \"$REPO_ROOT\" --output \"$REPO_ROOT/docs/.repo-facts.json\"",
                    "\"$PYTHON_BIN\" \"$SKILL_DIR/scripts/doc_plan.py\" --root \"$REPO_ROOT\" --mode audit --facts \"$REPO_ROOT/docs/.repo-facts.json\" --output \"$REPO_ROOT/docs/.doc-plan.json\"",
                    "\"$PYTHON_BIN\" \"$SKILL_DIR/scripts/doc_plan.py\" --root \"$REPO_ROOT\" --mode audit --facts \"$REPO_ROOT/docs/.repo-facts.json\" --output \"$REPO_ROOT/docs/.doc-plan-phase-f-audit.json\"",
                    "python3 -m unittest -v skills.docs-sor-maintainer.tests.test_doc_agents_validate",
                    "python3 -m unittest -v skills.docs-sor-maintainer.tests.test_doc_garden_repair_loop",
                    "python3 -m unittest -v skills.docs-sor-maintainer.tests.test_doc_validate_exec_plan_closeout",
                    "python3 -m unittest -v skills.docs-sor-maintainer.tests.test_doc_semantic_runtime",
                    "python3 -m unittest -v skills.docs-sor-maintainer.tests.test_doc_apply_section_actions",
                    "\"$PYTHON_BIN\" \"$SKILL_DIR/scripts/doc_apply.py\" --root \"$REPO_ROOT\" --plan \"$REPO_ROOT/docs/.doc-plan.json\" --mode apply-safe",
                    "\"$PYTHON_BIN\" \"$SKILL_DIR/scripts/doc_synthesize.py\" --root \"$REPO_ROOT\" --plan \"$REPO_ROOT/docs/.doc-plan.json\" --facts \"$REPO_ROOT/docs/.repo-facts.json\" --output \"$REPO_ROOT/docs/.doc-evidence-map.json\"",
                    "python3 -m unittest -v skills.docs-sor-maintainer.tests.test_doc_topology_schema",
                    "python3 -m unittest -v skills.docs-sor-maintainer.tests.test_doc_validate_topology_depth",
                    "python3 -m unittest -v skills.docs-sor-maintainer.tests.test_doc_quality_progressive_slots",
                    "python3 -m unittest -v skills.docs-sor-maintainer.tests.test_doc_apply_semantic_slots_v2",
                    "python3 -m unittest -v skills.docs-sor-maintainer.tests.test_doc_garden_skip_post_scan_when_no_apply",
                    "python3 - <<'PY'",
                    "import json",
                    "from pathlib import Path",
                    "root = Path(\"/Users/tompoet/AgentSkills\")",
                    "report = json.loads((root / \"docs/.doc-garden-report.json\").read_text(encoding=\"utf-8\"))",
                    "steps = [str(step.get(\"name\", \"\")) for step in report.get(\"steps\", [])]",
                    "assert report.get(\"apply\", {}).get(\"applied\") == 0",
                    "assert \"run:scan-post-apply\" not in steps",
                    "assert isinstance(report.get(\"summary\", {}).get(\"garden_total_duration_ms\"), int)",
                    "assert isinstance(report.get(\"performance\", {}).get(\"scan_duration_ms\"), int)",
                    "assert isinstance(report.get(\"performance\", {}).get(\"plan_duration_ms\"), int)",
                    "assert isinstance(report.get(\"performance\", {}).get(\"validate_duration_ms\"), int)",
                    "print(\"WP4 acceptance checks passed\")",
                    "PY",
                    "artifacts = [",
                    "\"docs/exec-plans/active/docs-sor-roadmap-v2.6-acceptance-report.md\",",
                    "\"docs/references/exec-plan-closeout-template.md\",",
                    "\"docs/exec-plans/completed/docs-sor-roadmap-v2.6-closeout-2026-02-24.md\",",
                    "]",
                    "for rel in artifacts:",
                    "assert (root / rel).exists(), f\"missing required V2.6 WP5 artifact: {rel}\"",
                    "plan_text = (",
                    "root / \"docs/exec-plans/active/docs-sor-roadmap-v2.6-topology-progressive-disclosure-governance.md\"",
                    ").read_text(encoding=\"utf-8\")",
                    "assert \"<!-- exec-plan-status: completed -->\" in plan_text",
                    "assert (",
                    "\"<!-- exec-plan-closeout: docs/exec-plans/completed/docs-sor-roadmap-v2.6-closeout-2026-02-24.md -->\"",
                    "in plan_text",
                    ")",
                    "print(\"WP5 acceptance checks passed\")",
                    "\"$PYTHON_BIN\" \"$SKILL_DIR/scripts/doc_plan.py\" --root \"$REPO_ROOT\" --mode audit --facts \"$REPO_ROOT/docs/.repo-facts.json\" --output \"$REPO_ROOT/docs/.doc-plan-v2.7-m1.json\"",
                    "\"$PYTHON_BIN\" \"$SKILL_DIR/scripts/doc_apply.py\" --root \"$REPO_ROOT\" --plan \"$REPO_ROOT/docs/.doc-plan-v2.7-m1.json\" --mode apply-safe",
                    "python3 -m unittest -v skills.docs-sor-maintainer.tests.test_doc_agents",
                    "\"$PYTHON_BIN\" \"$SKILL_DIR/scripts/doc_plan.py\" --root \"$REPO_ROOT\" --mode audit --facts \"$REPO_ROOT/docs/.repo-facts.json\" --output \"$REPO_ROOT/docs/.doc-plan-v2.7-m2.json\"",
                    "\"$PYTHON_BIN\" \"$SKILL_DIR/scripts/doc_apply.py\" --root \"$REPO_ROOT\" --plan \"$REPO_ROOT/docs/.doc-plan-v2.7-m2.json\" --mode apply-safe",
                    "python3 -m unittest -v skills.docs-sor-maintainer.tests.test_doc_plan_section_actions",
                    "\"$PYTHON_BIN\" \"$SKILL_DIR/scripts/doc_plan.py\" --root \"$REPO_ROOT\" --mode audit --facts \"$REPO_ROOT/docs/.repo-facts.json\" --output \"$REPO_ROOT/docs/.doc-plan-v2.7-m3.json\"",
                    "\"$PYTHON_BIN\" \"$SKILL_DIR/scripts/doc_apply.py\" --root \"$REPO_ROOT\" --plan \"$REPO_ROOT/docs/.doc-plan-v2.7-m3.json\" --mode apply-safe",
                    "\"$PYTHON_BIN\" \"$SKILL_DIR/scripts/doc_synthesize.py\" --root \"$REPO_ROOT\" --plan \"$REPO_ROOT/docs/.doc-plan-v2.7-m3.json\" --facts \"$REPO_ROOT/docs/.repo-facts.json\" --output \"$REPO_ROOT/docs/.doc-evidence-map.json\"",
                    "python3 -m unittest -v skills.docs-sor-maintainer.tests.test_doc_validate_semantic_observability",
                    "\"$PYTHON_BIN\" \"$SKILL_DIR/scripts/doc_garden.py\" --root \"$REPO_ROOT\" --plan-mode audit --apply-mode apply-safe --fail-on-drift --fail-on-freshness",
                    "\"$PYTHON_BIN\" \"$SKILL_DIR/scripts/doc_plan.py\" --root \"$REPO_ROOT\" --mode audit --facts \"$REPO_ROOT/docs/.repo-facts.json\" --output \"$REPO_ROOT/docs/.doc-plan-v2.7-m4.json\"",
                    "\"$PYTHON_BIN\" \"$SKILL_DIR/scripts/doc_apply.py\" --root \"$REPO_ROOT\" --plan \"$REPO_ROOT/docs/.doc-plan-v2.7-m4.json\" --mode apply-safe",
                    "\"$PYTHON_BIN\" \"$SKILL_DIR/scripts/doc_synthesize.py\" --root \"$REPO_ROOT\" --plan \"$REPO_ROOT/docs/.doc-plan-v2.7-m4.json\" --facts \"$REPO_ROOT/docs/.repo-facts.json\" --output \"$REPO_ROOT/docs/.doc-evidence-map.json\"",
                    "python3 -m unittest -v \\",
                    "skills.docs-sor-maintainer.tests.test_doc_semantic_runtime \\",
                    "skills.docs-sor-maintainer.tests.test_doc_plan_section_actions \\",
                    "skills.docs-sor-maintainer.tests.test_doc_apply_section_actions \\",
                    "skills.docs-sor-maintainer.tests.test_doc_validate_semantic_observability \\",
                    "skills.docs-sor-maintainer.tests.test_doc_garden_repair_loop \\",
                    "skills.docs-sor-maintainer.tests.test_doc_validate_exec_plan_closeout",
                    "python3 -m py_compile \"$SKILL_DIR\"/scripts/*.py"
                  ]
                }
              ],
              "citations": [
                "evidence://runbook.validation_commands"
              ],
              "citation": "evidence://runbook.validation_commands"
            }
          ]
        }
      ]
    }
  ]
}
